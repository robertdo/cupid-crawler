"use strict";angular.module("cupidCrawlerApp",["uiSlider","ui.bootstrap","ui.highlight"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("cupidCrawlerApp").controller("MainCtrl",["$scope","$http",function(a,b){a.profiles,a.profilesStatus="WAITING",a.profilesCount=-1,a.filtered=0,b({url:"/api/profiles",method:"GET"}).success(function(b){a.profiles=b.data,a.profilesStatus=b.status,a.profilesCount=b.count,a.locations=[],a.selectedLocations={},a.ages=[],a.selectedAges={},a.ageRange={minAge:void 0,maxAge:void 0},a.ethnicities=[],a.selectedEthnicities={},a.bodyTypes=[],a.selectedBodyTypes={},angular.forEach(a.profiles,function(b){for(var c=[],d=0;d<b.img_more.length;d++){var e={url:b.img_more[d],caption:b.img_more_captions[d]};c.push(e)}var f=b.img_more.split("'"),g=b.img_more_captions.split("'");c=[];for(var d=1;d<f.length;d++)if(1==d%2){var e={url:f[d],caption:g[d],selected:!1};c.push(e)}if(b.img_more=c,a.selectedLocations[b.location])$.grep(a.locations,function(a){return a.name==b.location})[0].count++;else{var h={name:b.location,checked:!0,count:1};a.selectedLocations[b.location]=!0,a.locations.push(h)}-1==a.ages.indexOf(b.age)&&({age:b.age},a.ages.push(b.age)),(void 0==a.ageRange.minAge||b.age<a.ageRange.minAge)&&(a.ageRange.minAge=b.age,a.minAgeStatic=b.age),(void 0==a.ageRange.maxAge||b.age>a.ageRange.maxAge)&&(a.ageRange.maxAge=b.age,a.maxAgeStatic=b.age);var i=b.ethnicity,j=i.split(",");if(angular.forEach(j,function(b){if(b=b.trim(),a.selectedEthnicities[b])$.grep(a.ethnicities,function(a){return a.ethnicity==b})[0].count++;else{var c={ethnicity:b,checked:!0,count:1};a.selectedEthnicities[b]=!0,a.ethnicities.push(c)}}),a.selectedBodyTypes[b.body_type])$.grep(a.bodyTypes,function(a){return a.type==b.body_type})[0].count++;else{var k={type:b.body_type,checked:!0,count:1};a.selectedBodyTypes[b.body_type]=!0,a.bodyTypes.push(k)}})}).error(function(b,c){a.status=c}),a.selectAll=function(a,b){for(var c in a)a[c]=b},a.allSelected=function(a,b){if(b){for(var c in a)if(!a[c])return!1;return!0}for(var c in a)if(a[c])return!1;return!0}}]);